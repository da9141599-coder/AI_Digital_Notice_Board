{% extends "base.html" %}

{% block title %}Notice Details{% endblock %}

{% block content %}
<div class="container my-5" style="max-width: 900px;">

  <div class="card shadow-lg border-0 rounded-4 overflow-hidden">

    <!-- HEADER -->
    <div class="card-header bg-white p-4 border-bottom">
      <div class="d-flex justify-content-between align-items-start">

        <div>
          <h3 class="fw-bold mb-2">{{ notice.title }}</h3>

          <div class="d-flex flex-wrap gap-2">
            <span class="badge bg-secondary">
              {{ notice.category|default:"General" }}
            </span>

            <!-- PRIORITY BADGE -->
            {% if notice.priority == "high" %}
              <span class="badge priority-high">ðŸ”´ High Priority</span>
            {% elif notice.priority == "medium" %}
              <span class="badge priority-medium">ðŸŸ  Medium Priority</span>
            {% else %}
              <span class="badge priority-low">ðŸŸ¢ Low Priority</span>
            {% endif %}
          </div>
        </div>

       <div class="float-end">
  {% if user.is_authenticated %}
    {% if user.is_superuser or user == notice.posted_by %}
      <a class="btn btn-sm btn-outline-primary"
         href="{% url 'notice:update_notice' notice.pk %}">
        Edit
      </a>
      <a class="btn btn-sm btn-outline-danger"
         href="{% url 'notice:delete_notice' notice.pk %}">
        Archive
      </a>
    {% endif %}
  {% endif %}
</div>

      </div>
    </div>

    <!-- BODY -->
    <div class="card-body p-4 p-md-5">

      <p class="notice-description">
        {{ notice.description|linebreaks }}
      </p>

      {% if notice.attachment %}
      <div class="attachment-box mt-4">
        <h6 class="fw-semibold mb-2">ðŸ“Ž Attachment</h6>
        <a href="{{ notice.attachment.url }}"
           target="_blank"
           class="btn btn-sm btn-outline-dark">
           Download File
        </a>
      </div>
      {% endif %}
    </div>

    <!-- FOOTER -->
    <div class="card-footer bg-light text-muted d-flex justify-content-between align-items-center px-4 py-3">
      <small>
        ðŸ“… Published on {{ notice.publish_date|date:"d M Y, H:i" }}
      </small>
      <small>
        ðŸ‘¤ Posted by <strong>{{ notice.posted_by.username }}</strong>
      </small>
    </div>

  </div>
</div>

<!-- ================= STYLES ================= -->
<style>
.notice-description {
    font-size: 1.05rem;
    line-height: 1.8;
    color: #333;
}

/* PRIORITY BADGES */
.priority-high {
    background: linear-gradient(135deg, #dc3545, #b02a37);
    color: white;
}

.priority-medium {
    background: linear-gradient(135deg, #fd7e14, #e8590c);
    color: white;
}

.priority-low {
    background: linear-gradient(135deg, #198754, #157347);
    color: white;
}

/* ATTACHMENT */
.attachment-box {
    background: #f8f9fa;
    padding: 16px;
    border-radius: 12px;
    border-left: 4px solid #0d6efd;
}
</style>

{% endblock %}

<h2>{{ notice.title }}</h2>
<p>{{ notice.description }}</p>

<a href="{% url 'notice:notice_list' %}">Back</a>
